<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OS Matching Game</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #e0f7fa, #f1f8e9);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
      color: #333;
      font-weight: bold;
    }
    .devices {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      padding: 20px;
      border: 2px solid #ccc;
      border-radius: 15px;
      background: #fff;
      width: 100%;
    }
    .dropzone {
      flex: 1 1 calc(50% - 20px);
      max-width: 220px;
      padding: 10px;
      border: 2px dashed #999;
      border-radius: 10px;
      background: #fafafa;
      min-height: 120px;
      transition: background 0.3s, transform 0.2s;
      text-align: center;
    }
    .dropzone img {
      display: block;
      margin: 0 auto;
      max-width: 70px;
      margin-top: 10px;
    }
    .dropzone.correct {
      background: #c8f7c5;
      border-color: green;
      transform: scale(1.05);
    }
    .dropzone.wrong {
      background: #f7c5c5;
      border-color: red;
      transform: scale(1.05);
    }
    .logos {
      display: flex;
      flex-direction: column;
      gap: 20px;
      padding: 20px;
      border: 2px solid #ccc;
      border-radius: 15px;
      background: #fff;
      align-items: center;
    }
    .logos img {
      width: 100px;
      cursor: grab;
      transition: transform 0.2s;
    }
    .logos img:active {
      transform: scale(1.2);
      cursor: grabbing;
    }
    #score, #timer {
      margin-top: 15px;
      font-size: 18px;
      font-weight: bold;
      text-align: center;
    }
    .progress {
      height: 25px;
      border-radius: 15px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container text-center">
    <h1>üñ•Ô∏è Match Devices to Operating Systems</h1>
    <p id="timer">‚è±Ô∏è Time Left: 30s</p>

    <div class="row g-4">
      <!-- Devices section -->
      <div class="col-md-8">
        <div class="devices">
          <div class="dropzone" data-os="android">
            <img src="images/phone.jpeg" alt="Phone">
          </div>
          <div class="dropzone" data-os="ios">
            <img src="images/iphone.jpeg" alt="Tablet">
          </div>
          <div class="dropzone" data-os="windows">
            <img src="images/laptop.jpeg" alt="Laptop">
          </div>
          <div class="dropzone" data-os="macos">
            <img src="images/macbook.jpeg" alt="Desktop">
          </div>
          <div class="dropzone" data-os="linux">
            <img src="images/linux.jpeg" alt="Smartwatch">
          </div>
        </div>
      </div>

      <!-- Logos section -->
      <div class="col-md-4">
        <div class="logos" id="logosContainer">
          <img src="images/ios.jpeg" draggable="true" data-os="ios" alt="iOS">
          <img src="images/MSOs.jpeg" draggable="true" data-os="windows" alt="Windows">
          <img src="images/macos.jpeg" draggable="true" data-os="macos" alt="macOS">
          <img src="images/linuxos.jpeg" draggable="true" data-os="linux" alt="Linux">
          <img src="images/andriod.jpeg" draggable="true" data-os="android" alt="Android">
        </div>
      </div>
    </div>

    <!-- Score + Progress Bar + Reset -->
    <div id="score">Score: 0 / 5</div>
    <div class="progress w-75 mx-auto">
      <div id="progressBar" class="progress-bar bg-success" role="progressbar" style="width: 0%">0%</div>
    </div>
    <button id="resetBtn" class="btn btn-primary mt-3">üîÑ Play Again</button>
  </div>

  <!-- Bootstrap Modal -->
  <div class="modal fade" id="resultModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Game Result</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center" id="modalMessage">
          <!-- Message injected via JS -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" id="playAgainBtn" class="btn btn-primary">Play Again</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Sounds -->
  <audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-4.mp3"></audio>
  <audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const logosContainer = document.getElementById("logosContainer");
    const logos = () => document.querySelectorAll('.logos img');
    const zones = () => document.querySelectorAll('.dropzone');
    const scoreDisplay = document.getElementById("score");
    const progressBar = document.getElementById("progressBar");
    const timerDisplay = document.getElementById("timer");
    const correctSound = document.getElementById("correctSound");
    const wrongSound = document.getElementById("wrongSound");
    const resetBtn = document.getElementById("resetBtn");
    const playAgainBtn = document.getElementById("playAgainBtn");
    const modal = new bootstrap.Modal(document.getElementById("resultModal"));
    const modalMessage = document.getElementById("modalMessage");

    let score = 0;
    let total = 5;
    let timeLeft = 30;
    let countdown;

    function shuffleLogos() {
      const logosArr = Array.from(logosContainer.children);
      logosArr.sort(() => Math.random() - 0.5);
      logosArr.forEach(logo => logosContainer.appendChild(logo));
    }

    function startTimer() {
      clearInterval(countdown);
      timeLeft = 30;
      timerDisplay.textContent = `‚è±Ô∏è Time Left: ${timeLeft}s`;
      countdown = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = `‚è±Ô∏è Time Left: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(countdown);
          endGame(false);
        }
      }, 1000);
    }

    function resetGame() {
      score = 0;
      scoreDisplay.textContent = `Score: 0 / ${total}`;
      progressBar.style.width = "0%";
      progressBar.textContent = "0%";
      zones().forEach(zone => {
        zone.classList.remove("correct", "wrong");
      });
      logos().forEach(logo => {
        logosContainer.appendChild(logo);
        logo.style.width = "100px";
      });
      shuffleLogos();
      startTimer();
    }

    function endGame(won) {
      modalMessage.textContent = won 
        ? "üéâ Well done! You matched all devices correctly!" 
        : "‚è±Ô∏è Time‚Äôs up! Try again!";
      modal.show();
    }

    function setupDragDrop() {
      logos().forEach(logo => {
        logo.addEventListener('dragstart', e => {
          e.dataTransfer.setData("os", logo.dataset.os);
        });
      });

      zones().forEach(zone => {
        zone.addEventListener('dragover', e => e.preventDefault());
        zone.addEventListener('drop', e => {
          e.preventDefault();
          let os = e.dataTransfer.getData("os");
          let draggedLogo = document.querySelector(`.logos img[data-os='${os}']`);
          if (os === zone.dataset.os && !zone.classList.contains("correct")) {
            zone.appendChild(draggedLogo);
            zone.classList.add("correct");
            draggedLogo.style.width = "60px";
            correctSound.play();
            score++;
            scoreDisplay.textContent = `Score: ${score} / ${total}`;
            let progress = (score / total) * 100;
            progressBar.style.width = progress + "%";
            progressBar.textContent = Math.round(progress) + "%";
            if (score === total) {
              clearInterval(countdown);
              endGame(true);
            }
          } else {
            zone.classList.add("wrong");
            wrongSound.play();
            setTimeout(() => zone.classList.remove("wrong"), 500);
          }
        });
      });
    }

    resetBtn.addEventListener("click", resetGame);
    playAgainBtn.addEventListener("click", () => {
      modal.hide();
      resetGame();
    });

    // Initialize game
    setupDragDrop();
    resetGame();
  </script>
</body>
</html>
